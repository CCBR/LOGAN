params {
    genome = "/data/OpenOmics/references/genome-seek/Homo_sapiens_assembly38.fasta" // file(params.genome) //
    wgsregion = "/data/nousomedr/annotation/resources_broad_hg38_v0_wgs_calling_regions.hg38.interval_list" //
    millsindel = "/data/CCBR_Pipeliner/Exome-seek/hg38/GATK_resource_bundle/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz" //"/data/OpenOmics/references/genome-seek/GATK_resource_bundle/hg38bundle/Mills_and_1000G_gold_standard.indels.hg38.vcf.gz"// file(params.gold_indels1) //
    shapeitindel =  "/data/CCBR_Pipeliner/Exome-seek/hg38/GATK_resource_bundle/ALL.wgs.1000G_phase3.GRCh38.ncbi_remapper.20150424.shapeit2_indels.vcf.gz" //"/data/OpenOmics/references/genome-seek/ALL.wgs.1000G_phase3.GRCh38.ncbi_remapper.20150424.shapeit2_indels.vcf.gz" //file(params.gold_indels2) //
    dbsnp = "/data/OpenOmics/references/genome-seek/GATK_resource_bundle/hg38bundle/dbsnp_138.hg38.vcf.gz"
    gnomad = '/data/CCBR_Pipeliner/Exome-seek/hg38/GNOMAD/somatic-hg38-af-only-gnomad.hg38.vcf.gz' // /data/CCBR_Pipeliner/Exome-seek/hg38/GNOMAD/somatic-hg38-af-only-gnomad.hg38.vcf.gz
    pon = "/data/CCBR_Pipeliner/Exome-seek/hg38/PON/hg38.noCOSMIC_ClinVar.pon.vcf.gz" //file{params.pom} 

    sample_sheet = "pairs.tsv"
    inputdir = "${params.inputdir}"
    intervalsdir = "/data/nousomedr/wgs/beds/*.bed"
    
    config_profile_description = 'Biowulf nf-core config'
    max_memory = 224.GB	
    max_cpus = 32
}

profiles {
    standard {
        process {
            executor = 'local'
            singularity {
                enabled = true
                autoMounts = true
                cacheDir = "$PWD/singularity"
                envWhitelist='https_proxy,http_proxy,ftp_proxy,DISPLAY,SLURM_JOBID'
                runOptions = '-B /data/OpenOmics/references/,/data/CCBR_Pipeliner/Exome-seek/,/data/nousomedr/,/data/CCBR/projects/,/vf/users/' 
            }
            withName:annotvep {
                container= '/data/nousomedr/programs/vcf2maf_102.sif'
                } 
            withName:bqsr {
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                }
            withName:samtoolsindex {
                container= '/data/nousomedr/programs/somaticseq/samtools.sif'
                }
            withName:gatherbqsr {
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                }
            withName:mutect2 {
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                }
            withName:mutect2_tonly {
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                }
            withName:applybqsr {
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                }


        }        
    }

    biowulf {
        process {
            executor = 'slurm'
            queue = 'norm'
            queueSize = 100
            errorStrategy = 'finish'
            maxRetries = 0
            pollInterval = '1 min'
            queueStatInterval = '5 min'
            submitRateLimit = '6/1min'
            
            //Container options
            singularity {
                enabled = true
                autoMounts = true
                cacheDir = "$PWD/singularity"
                envWhitelist='https_proxy,http_proxy,ftp_proxy,DISPLAY,SLURM_JOBID'
                runOptions = '-B /data/OpenOmics/references/,/data/CCBR_Pipeliner/Exome-seek/,/data/nousomedr/,/gpfs,/data/CCBR/,/vf/users/' 
            }
            timeline.enabled = true
            report.enabled = true
            //scratch = '/lscratch/$SLURM_JOBID'
            //
            
            //Each Process
            withName:fastp{
                module= 'fastp/0.23.2'
                memory=48.GB
                time=48.h
                cpus=4
            }

            withName:bqsr{
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                memory= 48.GB
                time= 48.h
            }
            withName:applybqsr{
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                memory= 48.GB
                time= 48.h
            }
             withName:samtoolsindex{
                container= '/data/nousomedr/programs/somaticseq/samtools.sif'
                memory= 16.GB
                time= 12.h
                cpus= 4
            }
            withName:gatherbqsr{
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                memory= 48.GB
                time= 48.h
            }
            withName:mutect2{
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                memory= 16.GB
                time= 24.h
            }
            withName:mutect2_tonly{
                container= '/data/nousomedr/programs/gatk_4.2.2.0.sif'
                memory= 16.GB
                time= 24.h
            }
            withName:annotvep{
                container= '/data/nousomedr/programs/vcf2maf_102.sif'
                memory= 32.GB
                time= 24.h
                cpus=16
            }
        }     
    }
}

